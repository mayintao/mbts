(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-loginSys"],{"6a14":function(e,t,n){"use strict";n.r(t);var a=n("d5b4"),i=n("9202");for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("8343");var s=n("828b"),r=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"19cee2ea",null,!1,a["a"],void 0);t["default"]=r.exports},"6e40":function(e,t,n){"use strict";n("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("0c26");var a={data:function(){return{selectedDepartment:"zh",name:"",password:""}},methods:{onLoad:function(){var e=document.createElement("script");e.async=!0,e.defer=!0,e.dataset.websiteId="97ca6962-6178-484a-b3b9-7d9398b6a82f",e.src="https://cloud.umami.is/script.js",document.head.appendChild(e);var t=uni.getStorageSync("lang")||"zh";console.log(t),this.selectedDepartment=t},onLanguageChange:function(e){console.log(e),this.selectedDepartment=e.detail.value,console.log(this.selectedDepartment),this.$i18n.locale=this.selectedDepartment,uni.setStorageSync("lang",this.selectedDepartment)},onKeyNameInput:function(e){this.name=e.target.value.trim()},onKeyPasswordInput:function(e){this.password=e.detail.value.trim()},gotoLogin:function(){var e=this;if(this.name)if(this.password&&8===this.password.length){console.log(this.name,this.password);var t=this;uni.showLoading({title:"logging in..."}),uni.request({url:"https://mbtsserver.onrender.com/api/loginMBTSCommonUser",method:"POST",data:{full_name:t.name,password:t.password,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(n){if(uni.hideLoading(),console.log(n),console.log(n.data.desc),200===n.data.code){uni.showToast({title:"success",icon:"success"});var a=n.data.data[0].role;console.log("角色："+a),uni.setStorageSync("user_info",{user_name:t.name,department:n.data.data[0].department}),0===a?uni.redirectTo({url:"studentMain"}):1===a?uni.redirectTo({url:"lecturerMain"}):2===a?uni.redirectTo({url:"financeMain"}):3===a?uni.redirectTo({url:"administratorMain"}):4===a?uni.redirectTo({url:"adminMainKV"}):5===a&&uni.redirectTo({url:"adminPostgraduate"})}else uni.showModal({content:e.$t("tips.invalid_username_or_password"),showCancel:!1})},fail:function(e){uni.hideLoading(),console.log(e),uni.showModal({title:"Tips",content:this.$t("tips.request_failed"),showCancel:!1})}})}else uni.showToast({title:this.$t("password"),icon:"none"});else uni.showToast({title:this.$t("tips.name_required"),icon:"none"})},gotoForgotPassword:function(){if(this.name){uni.showLoading({title:"waiting..."}),uni.request({url:"https://mbtsserver.onrender.com/api/forgetMBTSUserPsw",method:"POST",data:{full_name:this.name,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(e){uni.hideLoading(),console.log(e),console.log(e.data.desc),200===e.data.code?uni.showToast({title:e.data.desc,icon:"success"}):uni.showToast({title:e.data.desc,icon:"fail"})},fail:function(e){uni.hideLoading(),console.log(e),uni.showModal({title:"Tips",content:this.$t("tips.request_failed"),showCancel:!1})}})}else uni.showToast({title:this.$t("tips.name_required"),icon:"none"})},gotoRegister:function(){uni.redirectTo({url:"registerSys"})},gotoPay:function(e){0===e?uni.navigateTo({url:"/pages/index/commonPay"}):1===e&&uni.navigateTo({url:"/pages/index/commonPayUSD"})}}};t.default=a},8343:function(e,t,n){"use strict";var a=n("e8cc"),i=n.n(a);i.a},9202:function(e,t,n){"use strict";n.r(t);var a=n("6e40"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},a448:function(e,t,n){var a=n("c86c");t=a(!1),t.push([e.i,".container[data-v-19cee2ea]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-image:url(/static/web_main_bg.png) /* 替换为你的背景图片路径 */}.form-container[data-v-19cee2ea]{width:50%;background:#fff;padding:%?40?%;border-radius:%?20?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.1)}.input-group[data-v-19cee2ea]{margin-bottom:%?30?%}.input-wrapper[data-v-19cee2ea]{display:flex;align-items:center;background:#f5f5f5;border-radius:%?12?%;padding:%?30?%;margin-top:%?60?%;margin-bottom:%?80?%}.input[data-v-19cee2ea]{flex:1;margin-left:%?10?%;font-size:%?27?%;border:none;background:none}.btn[data-v-19cee2ea]{width:100%;height:auto;font-size:%?28?%;border-radius:%?12?%;margin-top:%?50?%}.login-btn[data-v-19cee2ea]{background:#007aff;color:#fff}.forgot-password-container[data-v-19cee2ea]{width:100%;padding:%?40?%}.forgot-password[data-v-19cee2ea]{display:inline-block; /* 避免占满整行 */margin:%?20?% %?40?%;       /* 上下间距 20rpx，左右为 0 */padding:%?10?% %?20?%;  /* 内边距更舒服 */background:#007aff;color:#fff;border-radius:%?8?%;   /* 圆角，更通用 */font-size:%?24?%;float:right          /* 让按钮居右 */}.register-btn[data-v-19cee2ea]{background:#fff;color:#007aff;border:%?2?% solid #007aff}.radio-group[data-v-19cee2ea]{margin:%?20?%;display:flex;flex-direction:row;gap:%?20?%}.radio-item[data-v-19cee2ea]{display:flex;align-items:center;font-size:%?28?%}.text-tips[data-v-19cee2ea]{margin:%?20?%;text-align:center;font-size:%?26?%;color:#666}.navbar[data-v-19cee2ea]{position:fixed;  /* 固定在最上方 */top:0;left:0;width:100%;      /* 占满宽度 */height:44px;     /* 高度可调整 */background-color:#fff;display:flex;justify-content:center; /* 水平居中 */align-items:center;     /* 垂直居中 */border-bottom:1px solid #eee;z-index:999            /* 保证在最上层 */}\n\n/* 标题样式 */.nav-title[data-v-19cee2ea]{font-size:16px;font-weight:700;white-space:nowrap;       /* 强制一行 */overflow:hidden;          /* 超出隐藏 */text-overflow:ellipsis;   /* 超出加 ... */max-width:90%;text-align:center}\n\n/* 超过 12 个字符时字体缩小 */.nav-title.small[data-v-19cee2ea]{font-size:14px}.uni-input[data-v-19cee2ea]{margin-top:%?30?%;height:auto;padding:%?15?% %?25?%;line-height:%?50?%;font-size:%?28?%;background:#fff;flex:1;background-color:#5b5b5b;color:#f7f7f7;border:%?2?% solid #007aff}",""]),e.exports=t},d5b4:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uIcon:n("d579").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"navbar"},[n("v-uni-view",{staticClass:"nav-title",class:{small:e.$t("welcome").length>12}},[e._v(e._s(e.$t("welcome")))])],1),n("v-uni-view",{staticClass:"form-container"},[n("v-uni-view",{staticClass:"input-group"},[n("v-uni-text",{staticClass:"text-tips"},[e._v(e._s(e.$t("please_select_language")))]),n("v-uni-radio-group",{staticClass:"radio-group",on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onLanguageChange.apply(void 0,arguments)}}},[n("v-uni-label",{staticClass:"radio-item"},[n("v-uni-radio",{attrs:{value:"zh",checked:"zh"===e.selectedDepartment}}),e._v(e._s("中文"))],1),n("v-uni-label",{staticClass:"radio-item"},[n("v-uni-radio",{attrs:{value:"en",checked:"en"===e.selectedDepartment}}),e._v(e._s("English"))],1),n("v-uni-label",{staticClass:"radio-item"},[n("v-uni-radio",{attrs:{value:"bahasa",checked:"bahasa"===e.selectedDepartment}}),e._v(e._s("Bahasa"))],1)],1)],1),n("v-uni-view",{staticClass:"input-group"},[n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"account",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:e.$t("name")},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.onKeyNameInput.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"lock",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{maxlength:"8",password:"true",placeholder:e.$t("password")},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.onKeyPasswordInput.apply(void 0,arguments)}}})],1)],1),n("v-uni-button",{staticClass:"btn login-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoLogin.apply(void 0,arguments)}}},[e._v(e._s(e.$t("login")))]),n("v-uni-view",{staticClass:"forgot-password-container"},[n("v-uni-text",{staticClass:"forgot-password",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoForgotPassword()}}},[e._v(e._s(e.$t("forgot_password")))])],1),n("v-uni-button",{staticClass:"btn register-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoRegister.apply(void 0,arguments)}}},[e._v(e._s(e.$t("register")))]),n("v-uni-button",{staticClass:"btn register-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.gotoPay(0)}}},[e._v(e._s(e.$t("fees_pay_by_non_registered_users_RM")))])],1)],1)},o=[]},e8cc:function(e,t,n){var a=n("a448");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("967d").default;i("e616987e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);