(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-student-selectCourse"],{1539:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("fd3c"),a("c223");var n={data:function(){return{full_name:"",student_id:"",campus_name:"",currentPage:0,listData:[],buttonPress:!1}},onLoad:function(t){t&&(this.full_name=t.full_name,console.log(this.full_name),this.student_id=t.student_id,console.log(this.student_id),this.campus_name=t.campus_name,console.log(this.campus_name)),this.queryCourseListByCampusName()},methods:{formatTimetable:function(t){if(!t)return[];if("string"===typeof t)try{t=JSON.parse(t),console.log(t)}catch(e){return console.error("JSON 解析失败:",e),[]}return Array.isArray(t)?t.map((function(t){return{date:t,info:"上课",backgroundColor:"red",color:"#ffffff"}})):[]},onDateChange:function(t){console.log("选择的日期:",t)},queryCourseListByCampusName:function(){uni.showLoading({title:"查询中..."});var t=this;uni.request({url:"https://mbtsserver.onrender.com/api/queryMBTSCourseListByCampusName",method:"POST",data:{campus_name:t.campus_name,startnum:t.currentPage,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(e){uni.hideLoading(),console.log(e),console.log(e.data.desc),200===e.data.code?t.currentPage>0?e.data.data.length>0&&(console.log(e.data.data.length),t.listData=t.listData.concat(e.data.data)):t.listData=e.data.data:uni.showModal({content:e.data.desc||"查询可选课程失败",showCancel:!1}),uni.stopPullDownRefresh()},fail:function(t){uni.hideLoading(),uni.stopPullDownRefresh(),console.log(t),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})},addMoreData:function(){this.currentPage+=20,this.queryCourseListByCampusName()},onPullDownRefresh:function(){this.currentPage=0,this.queryCourseListByCampusName()},gotoSelectCourse:function(t){var e=this;console.log("course_name is "+t.course_name),uni.showModal({title:"再次确认",content:"确定要选择"+t.course_name+"课程吗？",success:function(a){if(a.confirm){var n=e;uni.showLoading({title:"提交中..."}),uni.request({url:"https://mbtsserver.onrender.com/api/insertMBTSStudentCourse",method:"POST",data:{full_name:n.full_name,student_id:n.student_id,student_campus:n.campus_name,course_code:t.course_code,course_name:t.course_name,course_credit:t.course_credit,course_lecturer:t.course_lecturer,target_group_student:t.target_group_student,timetable:t.timetable,course_score:"",key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(t){uni.hideLoading(),console.log(t),console.log(t.data.desc),200===t.data.code?uni.showToast({title:"提交成功",icon:"success"}):uni.showModal({content:"抱歉："+t.data.desc||!1,showCancel:!1})},fail:function(t){uni.hideLoading(),console.log(t),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})}}})}}};e.default=n},4873:function(t,e,a){var n=a("87db");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var o=a("967d").default;o("4548fa69",n,!0,{sourceMap:!1,shadowMode:!1})},"87db":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".container[data-v-32510a04]{padding:%?20?%;background-color:#f8f9fa}.course-list[data-v-32510a04]{height:80vh;overflow-y:auto}.course-card[data-v-32510a04]{background:#fff;padding:%?20?%;border-radius:%?16?%;margin-bottom:%?20?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1)}.course-header[data-v-32510a04]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?10?%}.course-title[data-v-32510a04]{font-size:%?32?%;font-weight:700;color:#333}.course-code[data-v-32510a04]{font-size:%?26?%;color:#666}.course-body[data-v-32510a04]{margin-bottom:%?20?%}.course-info[data-v-32510a04]{display:flex;justify-content:space-between;font-size:%?28?%;color:#444;margin-bottom:%?5?%}.select-btn[data-v-32510a04]{width:100%}",""]),t.exports=e},"9f48":function(t,e,a){"use strict";a.r(e);var n=a("f9ab"),o=a("b40f");for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(s);a("dc08");var r=a("828b"),u=Object(r["a"])(o["default"],n["b"],n["c"],!1,null,"32510a04",null,!1,n["a"],void 0);e["default"]=u.exports},b40f:function(t,e,a){"use strict";a.r(e);var n=a("1539"),o=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=o.a},dc08:function(t,e,a){"use strict";var n=a("4873"),o=a.n(n);o.a},f9ab:function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var n={uNavbar:a("f9b1").default,uniCalendar:a("8129").default,uButton:a("c425").default,uLoadmore:a("09ba").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("u-navbar",{attrs:{title:"课程列表","is-back":!0}}),a("v-uni-scroll-view",{staticClass:"course-list",attrs:{"scroll-y":!0}},t._l(t.listData,(function(e,n){return a("v-uni-view",{key:n,staticClass:"course-card"},[a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-title"},[t._v(t._s(e.course_name))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[t._v("课程代码: "+t._s(e.course_code))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[t._v("讲师: "+t._s(e.course_lecturer))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[t._v("学分: "+t._s(e.course_credit))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[t._v("面向对象: "+t._s(e.target_group_student))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-title"},[t._v("上课时间：")])],1),a("uni-calendar",{attrs:{selected:t.formatTimetable(e.timetable)},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onDateChange.apply(void 0,arguments)}}}),a("u-button",{staticClass:"select-btn",style:t.buttonPress?"transform: scale(0.95);":"",attrs:{type:"primary",size:"default","custom-style":"background: linear-gradient(45deg, #ff7e5f, #feb47b); \n\t\t\t                color: white; \n\t\t\t                font-weight: bold; \n\t\t\t                border-radius: 12px; \n\t\t\t                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2); \n\t\t\t                padding: 12px 16px;\n\t\t\t                transition: transform 0.2s;"},on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.gotoSelectCourse(e)},touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.buttonPress=!0},touchend:function(e){arguments[0]=e=t.$handleEvent(e),t.buttonPress=!1}}},[t._v("🚀 选择课程")])],1)})),1),a("u-loadmore",{on:{loadmore:function(e){arguments[0]=e=t.$handleEvent(e),t.addMoreData.apply(void 0,arguments)}}})],1)},s=[]}}]);