(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-loginSys"],{"49b1":function(t,n,e){"use strict";var i=e("57d4"),a=e.n(i);a.a},"57d4":function(t,n,e){var i=e("71dd");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("967d").default;a("2bbc36c8",i,!0,{sourceMap:!1,shadowMode:!1})},"6a14":function(t,n,e){"use strict";e.r(n);var i=e("6c64"),a=e("9202");for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return a[t]}))}(o);e("49b1");var s=e("828b"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"b2677664",null,!1,i["a"],void 0);n["default"]=r.exports},"6c64":function(t,n,e){"use strict";e.d(n,"b",(function(){return a})),e.d(n,"c",(function(){return o})),e.d(n,"a",(function(){return i}));var i={uIcon:e("d579").default},a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"navbar"},[e("v-uni-view",{staticClass:"nav-title",class:{small:t.$t("welcome").length>12}},[t._v(t._s(t.$t("welcome")))])],1),e("v-uni-view",{staticClass:"form-container"},[e("v-uni-view",{staticClass:"input-group"},[e("v-uni-view",{staticClass:"input-wrapper"},[e("u-icon",{attrs:{name:"account",size:"22"}}),e("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:t.$t("name")},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.onKeyNameInput.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"input-wrapper"},[e("u-icon",{attrs:{name:"lock",size:"22"}}),e("v-uni-input",{staticClass:"input",attrs:{maxlength:"8",password:"true",placeholder:t.$t("password")},on:{input:function(n){arguments[0]=n=t.$handleEvent(n),t.onKeyPasswordInput.apply(void 0,arguments)}}})],1)],1),e("v-uni-button",{staticClass:"btn login-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoLogin.apply(void 0,arguments)}}},[t._v(t._s(t.$t("login")))]),e("v-uni-button",{staticClass:"btn register-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoRegister.apply(void 0,arguments)}}},[t._v(t._s(t.$t("register")))]),e("v-uni-button",{staticClass:"btn register-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoPay(0)}}},[t._v(t._s(t.$t("fees_pay_by_non_registered_users_RM")))]),e("v-uni-button",{staticClass:"btn register-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoPay(1)}}},[t._v(t._s(t.$t("fees_pay_by_non_registered_users_USD")))]),e("v-uni-button",{staticClass:"btn register-btn",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.gotoAITools.apply(void 0,arguments)}}},[t._v("AI")])],1)],1)},o=[]},"6e40":function(t,n,e){"use strict";e("6a54"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,e("0c26");var i={onLoad:function(){var t=document.createElement("script");t.async=!0,t.defer=!0,t.dataset.websiteId="97ca6962-6178-484a-b3b9-7d9398b6a82f",t.src="https://cloud.umami.is/script.js",document.head.appendChild(t)},data:function(){return{name:"",password:""}},methods:{onKeyNameInput:function(t){this.name=t.target.value.trim()},onKeyPasswordInput:function(t){this.password=t.detail.value.trim()},gotoLogin:function(){if(this.name)if(this.password&&8===this.password.length){console.log(this.name,this.password);var t=this;uni.showLoading({title:"登录中..."}),uni.request({url:"https://mbtsserver.onrender.com/api/loginMBTSCommonUser",method:"POST",data:{full_name:t.name,password:t.password,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(n){if(uni.hideLoading(),console.log(n),console.log(n.data.desc),200===n.data.code){uni.showToast({title:"登录成功",icon:"success"});var e=n.data.data[0].role;console.log("角色："+e),uni.setStorageSync("user_info",{user_name:t.name,department:n.data.data[0].department}),0===e?uni.redirectTo({url:"studentMain"}):1===e?uni.redirectTo({url:"lecturerMain"}):2===e?uni.redirectTo({url:"financeMain"}):3===e&&uni.redirectTo({url:"administratorMain"})}else uni.showModal({content:"用户名或登录密码错误！",showCancel:!1})},fail:function(t){uni.hideLoading(),console.log(t),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})}else uni.showToast({title:"请输入8位密码",icon:"none"});else uni.showToast({title:"名称不能为空",icon:"none"})},gotoRegister:function(){uni.redirectTo({url:"registerSys"})},gotoPay:function(t){0===t?uni.navigateTo({url:"/pages/index/commonPay"}):1===t&&uni.navigateTo({url:"/pages/index/commonPayUSD"})},gotoAITools:function(){uni.navigateTo({url:"/pages/index/aitools/mainAI"})}}};n.default=i},"71dd":function(t,n,e){var i=e("c86c");n=i(!1),n.push([t.i,".container[data-v-b2677664]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-image:url(/static/web_bg.png) /* 替换为你的背景图片路径 */}.form-container[data-v-b2677664]{width:50%;background:#fff;padding:%?40?%;border-radius:%?20?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.1)}.input-group[data-v-b2677664]{margin-bottom:%?30?%}.input-wrapper[data-v-b2677664]{display:flex;align-items:center;background:#f5f5f5;border-radius:%?12?%;padding:%?30?%;margin-top:%?60?%;margin-bottom:%?80?%}.input[data-v-b2677664]{flex:1;margin-left:%?10?%;font-size:%?27?%;border:none;background:none}.btn[data-v-b2677664]{width:100%;height:auto;font-size:%?28?%;border-radius:%?12?%;margin-top:%?50?%}.login-btn[data-v-b2677664]{background:#007aff;color:#fff}.register-btn[data-v-b2677664]{background:#fff;color:#007aff;border:%?2?% solid #007aff}.text-tips[data-v-b2677664]{text-align:center;font-size:%?28?%;color:#666;margin-top:%?20?%}.navbar[data-v-b2677664]{position:fixed;  /* 固定在最上方 */top:0;left:0;width:100%;      /* 占满宽度 */height:44px;     /* 高度可调整 */background-color:#fff;display:flex;justify-content:center; /* 水平居中 */align-items:center;     /* 垂直居中 */border-bottom:1px solid #eee;z-index:999            /* 保证在最上层 */}\n\n/* 标题样式 */.nav-title[data-v-b2677664]{font-size:16px;font-weight:700;white-space:nowrap;       /* 强制一行 */overflow:hidden;          /* 超出隐藏 */text-overflow:ellipsis;   /* 超出加 ... */max-width:90%;text-align:center}\n\n/* 超过 12 个字符时字体缩小 */.nav-title.small[data-v-b2677664]{font-size:14px}",""]),t.exports=n},9202:function(t,n,e){"use strict";e.r(n);var i=e("6e40"),a=e.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){e.d(n,t,(function(){return i[t]}))}(o);n["default"]=a.a}}]);