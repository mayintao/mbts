(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-student-myCourses"],{"03b8":function(e,t,a){"use strict";a.r(t);var s=a("524b"),r=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return s[e]}))}(i);t["default"]=r.a},"1d33":function(e,t,a){"use strict";a.r(t);var s=a("7d4f"),r=a("03b8");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("ffba");var o=a("828b"),c=Object(o["a"])(r["default"],s["b"],s["c"],!1,null,"eeef723c",null,!1,s["a"],void 0);t["default"]=c.exports},"524b":function(e,t,a){"use strict";a("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("fd3c"),a("4626");var s={data:function(){return{full_name:"",student_id:"",campus_name:"",type_of_programme:"",country_type:0,scholarship:0,listData:[],hasSelectedCredit:0,selectedCourseNum:0,averageScore:0,allGetScore:0,allGetCredit:0,uploadButtonPress:!1}},onLoad:function(){var e=uni.getStorageSync("student_info");e&&(this.full_name=e.full_name,console.log(this.full_name),this.student_id=e.student_id,console.log(this.student_id),this.campus_name=e.campus_name,console.log(this.campus_name),this.type_of_programme=e.type_of_programme,console.log(this.type_of_programme),this.country_type=e.country_type,console.log(this.country_type),this.scholarship=e.scholarship,console.log(this.scholarship),this.queryStudentCourseList())},onShow:function(){this.full_name||uni.navigateTo({url:"/pages/index/loginSys"})},methods:{formatTimetable:function(e){if(!e)return[];if("string"===typeof e)try{e=JSON.parse(e),console.log(e)}catch(t){return console.error("JSON 解析失败:",t),[]}return Array.isArray(e)?e.map((function(e){return{date:e,info:"Course",backgroundColor:"red",color:"#ffffff"}})):[]},onDateChange:function(e){console.log("选择的日期:",e)},getScoreClass:function(e){return e?["A+","A","A-"].includes(e)?"score-excellent":["B+","B","B-"].includes(e)?"score-good":["C+","C","C-"].includes(e)?"score-pass":"score-fail":"score-empty"},queryStudentCourseList:function(){var e=this;uni.showLoading({title:this.$t("tips.searching")});var t=this;uni.request({url:"https://mbtsserver.onrender.com/api/queryMBTSStudentCourseList?student_id=&full_name="+t.full_name+"&key=registeruser1739935308mbts",method:"GET",success:function(a){if(uni.hideLoading(),console.log(a),console.log(a.data.desc),200===a.data.code){t.listData=a.data.data,t.selectedCourseNum=t.listData.length,t.hasSelectedCredit=0,t.averageScore=0,t.allGetScore=0,t.allGetCredit=0;for(var s=0,r=0;r<t.listData.length;r++)0===t.listData[r].is_audit&&(t.hasSelectedCredit=t.hasSelectedCredit+t.listData[r].course_credit,t.listData[r].course_score&&("A+"===t.listData[r].course_score||"A"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+4*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"A-"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+3.7*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"B+"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+3.3*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"B"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+3*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"B-"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+2.7*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"C+"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+2.3*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"C"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+2*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"C-"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+1.7*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"D+"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+1.3*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"D"===t.listData[r].course_score||"D-"===t.listData[r].course_score?(t.allGetScore=t.allGetScore+1*t.listData[r].course_credit,t.allGetCredit=t.allGetCredit+t.listData[r].course_credit,s+=t.listData[r].course_credit):"P"===t.listData[r].course_score&&(t.allGetCredit=t.allGetCredit+t.listData[r].course_credit)));t.averageScore=t.allGetScore/s}else t.listData=[],t.hasSelectedCredit=0,t.selectedCourseNum=0,t.averageScore=0,uni.showModal({content:a.data.desc||e.$t("tips.query_course_failed"),showCancel:!1})},fail:function(e){uni.hideLoading(),console.log(e),uni.showModal({title:"Tips",content:this.$t("tips.request_failed"),showCancel:!1})}})},gotoUploadAssignment:function(e){var t=this;console.log("item id is "+e.id),uni.chooseFile({count:1,type:"all",success:function(a){var s=a.tempFiles[0],r=Math.floor(Date.now()/1e3)+"_"+s.name;console.log(r),uni.showLoading({title:"upload..."}),uni.uploadFile({url:"https://mbtsserver.onrender.com/api/uploadfile",filePath:s.path,name:"file",formData:{Bucket:"mbts-assignment"},success:function(a){if(uni.hideLoading(),uni.showToast({title:"success",icon:"none"}),a.data){console.log(a.data);var s=JSON.parse(a.data);t.uploadToServer(s.url,r,e)}},fail:function(e){uni.hideLoading(),console.error("失败",e),uni.showToast({title:e.message,icon:"error"})}})},fail:function(e){console.error("选择文件失败",e)}})},uploadToServer:function(e,t,a){var s=this;console.log(e,t,a);uni.showLoading({title:this.$t("tips.submitting")}),uni.request({url:"https://mbtsserver.onrender.com/api/insertMBTSStudentAssignment",method:"POST",data:{full_name:this.full_name,student_id:this.student_id,student_campus:this.campus_name,file_url:e,file_name:t,timetable:a.timetable,course_name:a.course_name,course_code:a.course_code,course_lecturer:a.course_lecturer,course_credit:a.course_credit,course_term:a.course_term,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(e){uni.hideLoading(),console.log(e),console.log(e.data.desc),200===e.data.code?uni.showToast({title:s.$t("tips.submit_success"),icon:"success"}):uni.showModal({content:e.data.desc||s.$t("tips.submit_failed"),showCancel:!1})},fail:function(e){uni.hideLoading(),console.log(e),uni.showModal({title:"Tips",content:this.$t("tips.request_failed"),showCancel:!1})}})},gotoSeeAssignment:function(e){console.log("item id is "+e.id);uni.setStorageSync("student_info",{full_name:this.full_name,student_id:this.student_id,campus_name:this.campus_name,course_name:e.course_name,course_code:e.course_code,course_term:e.course_term}),uni.navigateTo({url:"/pages/index/student/myAssignment"})}}};t.default=s},"7d4f":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return s}));var s={uNavbar:a("aed2").default,uniCalendar:a("fbf4").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"container"},[a("u-navbar",{attrs:{title:e.$t("my_course.myCourses"),"is-back":!0}}),a("v-uni-view",{staticClass:"credit-container"},[a("v-uni-text",{staticClass:"credit-label"},[e._v(e._s(e.$t("my_course.earnedCredits"))+"：")]),a("v-uni-text",{staticClass:"credit-value"},[e._v(e._s(e.hasSelectedCredit))]),a("v-uni-text",{staticClass:"separator",staticStyle:{margin:"0 30rpx"}}),a("v-uni-text",{staticClass:"credit-label"},[e._v(e._s(e.$t("my_course.selectedCoursesCount"))+"：")]),a("v-uni-text",{staticClass:"credit-value"},[e._v(e._s(e.selectedCourseNum))]),a("v-uni-text",{staticClass:"separator",staticStyle:{margin:"0 30rpx"}}),a("v-uni-text",{staticClass:"credit-label"},[e._v(e._s(e.$t("my_course.gpa"))+"：")]),a("v-uni-text",{staticClass:"credit-value"},[e._v(e._s(e.averageScore))]),a("v-uni-text",{staticClass:"separator",staticStyle:{margin:"0 30rpx"}}),a("v-uni-text",{staticClass:"credit-label"},[e._v(e._s(e.$t("my_course.creditsEarned"))+"：")]),a("v-uni-text",{staticClass:"credit-value"},[e._v(e._s(e.allGetCredit))])],1),a("v-uni-scroll-view",{staticClass:"course-list",attrs:{"scroll-y":!0}},e._l(e.listData,(function(t,s){return a("v-uni-view",{key:s,staticClass:"course-card"},[a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-title selectable-text"},[e._v(e._s(t.course_name))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code selectable-text"},[e._v(e._s(e.$t("my_course.courseCode"))+": "+e._s(t.course_code))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[e._v(e._s(0===t.class_method?"中文槟城总院(实体)":1===t.class_method?"中文线上":2===t.class_method?"中文雪隆分院":3===t.class_method?"English Penang Main Campus":4===t.class_method?"English Online":5===t.class_method?"English KV Branch":6===t.class_method?"Malay Kampus Utama Pulau Pinang":7===t.class_method?"Malay Online":8===t.class_method?"Malay KV":10===t.class_method?"研究院":12===t.class_method?"Postgraduate English":14===t.class_method?"Postgraduate BM":t.class_method))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[e._v(e._s(0===t.is_audit?e.$t("my_course.fullTimeStudent"):1===t.is_audit?e.$t("my_course.audit"):t.is_audit))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code selectable-text"},[e._v(e._s(e.$t("my_course.lecturer"))+": "+e._s(t.course_lecturer))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code selectable-text"},[e._v(e._s(e.$t("my_course.credits"))+": "+e._s(1===t.is_audit?e.$t("my_course.auditNoCredit"):t.course_credit))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[e._v(e._s(e.$t("my_course.semester"))+": "+e._s(t.course_term))])],1),a("v-uni-view",{staticClass:"calendar-header"},[a("v-uni-text",{staticClass:"calendar-title"},[e._v(e._s(e.$t("my_course.classTime")))])],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-view",{staticStyle:{display:"flex","flex-wrap":"wrap",gap:"15rpx",padding:"20rpx","justify-content":"flex-start"}},e._l(e.formatTimetable(t.timetable),(function(t,s){return a("v-uni-text",{key:s,staticClass:"date-text selectable-text",staticStyle:{"text-align":"center",color:"red"}},[e._v(e._s(t.date))])})),1)],1),a("v-uni-view",{staticClass:"calendar-container"},[a("uni-calendar",{attrs:{selected:e.formatTimetable(t.timetable)},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onDateChange.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"course-header"},[a("v-uni-text",{staticClass:"course-code"},[e._v(e._s(t.classtime_detail))])],1),a("v-uni-view",{staticClass:"form-item"},[a("v-uni-view",{staticClass:"calendar-header"},[a("v-uni-text",{staticClass:"calendar-title"},[e._v(e._s(e.$t("my_course.yourGrades")))])],1),a("v-uni-view",{staticClass:"uni-input score-display",class:e.getScoreClass(t.course_score)},[e._v(e._s(t.course_score?t.course_score:e.$t("my_course.noGradesYet")))])],1)],1)})),1)],1)},i=[]},"88c1":function(e,t,a){var s=a("c86c");t=s(!1),t.push([e.i,".container[data-v-eeef723c]{padding:%?20?%;background-color:#f8f9fa}.credit-container[data-v-eeef723c]{display:flex;align-items:center;background-color:#f3f9ff; /* 浅蓝色背景 */padding:%?12?% %?24?%;border-radius:%?12?%;box-shadow:%?2?% %?2?% %?10?% rgba(0,0,0,.1);font-weight:700}.credit-label[data-v-eeef723c]{font-size:%?32?%;color:#333;margin-right:%?10?%}.credit-value[data-v-eeef723c]{font-size:%?40?%;font-weight:700;color:#007aff /* 蓝色，突出显示 */}.credit-unit[data-v-eeef723c]{font-size:%?28?%;color:#666;margin-left:%?6?%}.separator[data-v-eeef723c]{font-size:%?32?%;color:#666}.course-list[data-v-eeef723c]{margin-top:%?20?%;height:auto;overflow-y:auto;margin-bottom:%?20?%}.course-card[data-v-eeef723c]{background:#fff; /* 纯白色背景 */padding:%?30?%;border-radius:%?16?%;margin-bottom:%?20?%;border:%?2?% solid #e0e0e0; /* 添加浅灰色边框 */box-shadow:0 %?6?% %?12?% rgba(0,0,0,.05); /* 让阴影更柔和 */transition:all .3s ease-in-out /* 增加过渡效果 */}\n\n/* 添加交互效果，鼠标悬停时稍微提升 */.course-card[data-v-eeef723c]:active{-webkit-transform:scale(.98);transform:scale(.98);box-shadow:0 %?8?% %?16?% rgba(0,0,0,.08)}.course-header[data-v-eeef723c]{display:flex;justify-content:space-between;align-items:center;margin:%?30?%}.course-title[data-v-eeef723c]{font-size:%?32?%;font-weight:700;color:#333}.course-code[data-v-eeef723c]{font-size:%?30?%;color:#666}.course-body[data-v-eeef723c]{margin-bottom:%?20?%}.course-info[data-v-eeef723c]{display:flex;justify-content:space-between;font-size:%?28?%;color:#444;margin-bottom:%?5?%}\n\n/* Form Item 纵向排列 */.form-item[data-v-eeef723c]{margin-top:%?30?%;margin-bottom:%?30?%}\n\n/* 标签样式 */.form-label[data-v-eeef723c]{margin-top:%?10?%;font-size:%?30?%;color:#333;font-weight:700;margin-bottom:%?10?%}\n\n/* 输入框的容器 */.input-wrapper[data-v-eeef723c]{background-color:#fff;border-radius:%?12?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1); /* 轻微阴影 */padding:%?8?% %?30?%;border:%?1?% solid #ddd; /* 边框 */margin:%?30?%}.score-display[data-v-eeef723c]{padding:%?10?% %?20?%;border-radius:%?10?%;text-align:center;font-size:%?32?%;font-weight:700;background-color:#f5f5f5 /* 默认背景 */}.score-empty[data-v-eeef723c]{color:#999 /* 无成绩 */}.score-excellent[data-v-eeef723c]{color:#4caf50 /* A 级 */}.score-good[data-v-eeef723c]{color:#2196f3 /* B 级 */}.score-pass[data-v-eeef723c]{color:#ff9800 /* C 级 */}.score-fail[data-v-eeef723c]{color:#ff5722 /* D, F 不及格 */}.button-container[data-v-eeef723c]{margin:%?30?%;display:flex;justify-content:space-between; /* 平均分布按钮 */align-items:center;padding:0 %?30?% /* 控制左右边距 */}.btn-container[data-v-eeef723c]{display:flex;justify-content:center;align-items:center;width:100%}.select-btn[data-v-eeef723c]{width:80%;margin:%?20?% 0; /* 上下 20rpx，左右保持居中 */background:linear-gradient(45deg,#007bff,#00c6ff);color:#fff;font-weight:700;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.2);padding:12px 16px;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.select-btn[data-v-eeef723c]:active{-webkit-transform:scale(.95);transform:scale(.95)}.select-btn-del[data-v-eeef723c]{width:80%;margin:%?20?% 0; /* 上下 20rpx，左右保持居中 */background:linear-gradient(45deg,#ff7e5f,#feb47b);color:#fff;font-weight:700;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,.2);padding:12px 16px;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.select-btn-del[data-v-eeef723c]:active{-webkit-transform:scale(.95);transform:scale(.95)}.calendar-header[data-v-eeef723c]{display:flex;justify-content:center;  /* 水平居中 */align-items:center;      /* 垂直居中 */background-color:#f3f3f3; /* 淡灰色背景 */padding:%?20?% 0;border-radius:%?16?%;box-shadow:%?2?% %?2?% %?10?% rgba(0,0,0,.05);font-weight:700}.calendar-title[data-v-eeef723c]{font-size:%?36?%;color:#333;font-weight:700}.calendar-container[data-v-eeef723c]{margin-top:%?20?%;padding:%?20?%;background-color:#fff;border-radius:%?16?%;box-shadow:0 %?4?% %?12?% rgba(0,0,0,.1)}.selectable-text[data-v-eeef723c]{-webkit-user-select:text;user-select:text; /* 允许文本复制 */word-wrap:break-word}.date-text[data-v-eeef723c]{color:red; /* 文字颜色 */text-align:center; /* 文字居中 */font-size:%?30?%; /* 增大字体，方便阅读 */font-weight:700; /* 加粗，提高可读性 */background-color:#ffecec; /* 轻微红色背景，提高可读性 */padding:%?10?% %?20?%; /* 增加内边距，让日期更易读 */border-radius:%?10?%; /* 圆角，美观 */display:inline-block; /* 让每个日期占据适当宽度 */white-space:nowrap /* 防止日期换行 */}",""]),e.exports=t},a531:function(e,t,a){var s=a("88c1");s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=a("967d").default;r("05b21805",s,!0,{sourceMap:!1,shadowMode:!1})},ffba:function(e,t,a){"use strict";var s=a("a531"),r=a.n(s);r.a}}]);