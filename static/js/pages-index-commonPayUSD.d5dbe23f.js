(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-commonPayUSD"],{"0df3":function(t,e,n){"use strict";n.r(e);var a=n("477a"),i=n("e65d");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("88c5");var s=n("828b"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"51cec33e",null,!1,a["a"],void 0);e["default"]=u.exports},"0eef":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".container[data-v-51cec33e]{display:flex;flex-direction:column;background-color:#f8f9fa;min-height:auto;padding:%?20?%;align-items:center}.section-title[data-v-51cec33e]{font-size:%?42?%;font-weight:700;color:#666;padding:%?20?%;margin-top:%?40?%}.section-subtitle[data-v-51cec33e]{font-size:%?32?%;color:#444;padding:%?20?%;margin-top:%?40?%}.head-container[data-v-51cec33e]{display:flex;flex-direction:column; /* 让头像和按钮垂直排列 */align-items:center;padding:%?20?%}.btn[data-v-51cec33e]{width:%?1000?%;margin:%?20?%;padding:20px;text-align:center}.input-wrapper[data-v-51cec33e]{height:auto;padding:%?20?%;width:20%;background-color:#fff;border-radius:%?12?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1); /* 轻微阴影 */border:%?1?% solid #ddd; /* 边框 */margin-top:%?10?%;margin-bottom:%?10?%}.form-item[data-v-51cec33e]{margin-top:%?30?%;margin-bottom:%?30?%}",""]),t.exports=e},"477a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var a={uRadioGroup:n("63a8").default,uRadio:n("caf5").default,uButton:n("6def").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-text",{staticClass:"section-title"},[t._v("MJS系统支付(USD)")]),n("v-uni-view",{staticClass:"input-wrapper"},[n("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学生或支付机构名称",type:"text"},model:{value:t.pay_student_name,callback:function(e){t.pay_student_name=e},expression:"pay_student_name"}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学生ID",type:"text"},model:{value:t.pay_student_id,callback:function(e){t.pay_student_id=e},expression:"pay_student_id"}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"其他支付备注信息",type:"text"},model:{value:t.pay_other_info,callback:function(e){t.pay_other_info=e},expression:"pay_other_info"}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("u-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeOptions,(function(e){return n("u-radio",{key:e.value,attrs:{name:e.value}},[t._v(t._s(e.label))])})),1)],1),n("v-uni-text",{staticClass:"section-subtitle"},[t._v("请输入不少于100的金额（USD）")]),n("v-uni-view",{staticClass:"input-wrapper"},[n("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入金额",type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.validateFee.apply(void 0,arguments)}},model:{value:t.fee,callback:function(e){t.fee=e},expression:"fee"}})],1),n("v-uni-text",{staticClass:"section-subtitle"},[t._v("请选择支付渠道")]),n("v-uni-view",{staticClass:"head-container"},[n("u-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoPayStripe("USD","card")}}},[t._v("银行卡支付")])],1)],1)},o=[]},7820:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("e966"),n("0c26");var a={data:function(){return{pay_student_name:"",pay_student_id:"",pay_other_info:"",typeOptions:[{label:"学费",value:0},{label:"其他费用",value:1},{label:"申请费",value:2},{label:"毕业费",value:3},{label:"学生费",value:4}],type:0,fee:100}},onLoad:function(){},onShow:function(){},mounted:function(){},methods:{validateFee:function(){var t=parseInt(this.fee);(isNaN(t)||t<100)&&(uni.showModal({title:"提示",content:"请输入不少于100的金额",showCancel:!1}),this.fee="")},gotoPayStripe:function(t,e){this.pay_student_name.trim()?uni.request({url:"https://mbtsserver.onrender.com/api/payment/create-checkout-session",method:"POST",header:{"Content-Type":"application/json"},data:{amount:100*this.fee,currency:t,name:this.pay_student_name+"_"+this.pay_student_id+"_"+this.pay_other_info+"(USD)",pay_type:e,type:this.type,student_id:this.pay_student_id},success:function(t){console.log(t),200===t.statusCode?(console.log(t.data.url),window.open(t.data.url,"_blank")):(uni.showModal({title:"支付创建失败",content:t.data.error,showCancel:!1}),console.error("支付创建失败",t.data))},fail:function(t){uni.showModal({title:"请求失败",content:t,showCancel:!1}),console.error("请求失败",t)}}):uni.showToast({title:"名称不能为空",icon:"none"})}}};e.default=a},"88c5":function(t,e,n){"use strict";var a=n("fef8"),i=n.n(a);i.a},e65d:function(t,e,n){"use strict";n.r(e);var a=n("7820"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},fef8:function(t,e,n){var a=n("0eef");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("c0e81fe4",a,!0,{sourceMap:!1,shadowMode:!1})}}]);