(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-commonPay"],{"0479":function(t,e,a){"use strict";a.r(e);var n=a("eea3"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},"0f57":function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return n}));var n={uRadioGroup:a("63a8").default,uRadio:a("caf5").default,uButton:a("6def").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-text",{staticClass:"section-title"},[t._v("MJS-Pay")]),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:t.$t("tips.enter_student_or_agency"),type:"text"},model:{value:t.pay_student_name,callback:function(e){t.pay_student_name=e},expression:"pay_student_name"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:t.$t("tips.enter_student_id"),type:"text"},model:{value:t.pay_student_id,callback:function(e){t.pay_student_id=e},expression:"pay_student_id"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:t.$t("tips.enter_campus_info"),type:"text"},model:{value:t.pay_student_campus,callback:function(e){t.pay_student_campus=e},expression:"pay_student_campus"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:t.$t("tips.other_remarks"),type:"text"},model:{value:t.pay_other_info,callback:function(e){t.pay_other_info=e},expression:"pay_other_info"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("u-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeOptions,(function(e){return a("u-radio",{key:e.value,attrs:{name:e.value}},[t._v(t._s(e.label))])})),1)],1),a("v-uni-text",{staticClass:"section-subtitle"},[t._v(t._s(t.$t("tips.enter_amount_minimum"))+"（MYR）")]),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:t.$t("tips.enter_amount"),type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.validateFee.apply(void 0,arguments)}},model:{value:t.fee,callback:function(e){t.fee=e},expression:"fee"}})],1),a("v-uni-text",{staticClass:"section-subtitle"},[t._v(t._s(t.$t("tips.select_payment_channel")))]),a("v-uni-view",{staticClass:"head-container"},[a("u-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoPayStripe("MYR","card")}}},[t._v(t._s(t.$t("tips.bank_card_payment")))])],1)],1)},s=[]},"487e":function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".container[data-v-fa95be20]{display:flex;flex-direction:column;background-color:#f8f9fa;min-height:auto;padding:%?20?%;align-items:center}.section-title[data-v-fa95be20]{font-size:%?42?%;font-weight:700;color:#666;padding:%?20?%;margin-top:%?40?%}.section-subtitle[data-v-fa95be20]{font-size:%?32?%;color:#444;padding:%?20?%;margin-top:%?40?%}.head-container[data-v-fa95be20]{display:flex;flex-direction:column; /* 让头像和按钮垂直排列 */align-items:center;padding:%?20?%}.btn[data-v-fa95be20]{width:%?1000?%;margin:%?20?%;padding:20px;text-align:center}.input-wrapper[data-v-fa95be20]{height:auto;padding:%?20?%;width:20%;background-color:#fff;border-radius:%?12?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1); /* 轻微阴影 */border:%?1?% solid #ddd; /* 边框 */margin-top:%?10?%;margin-bottom:%?10?%}.form-item[data-v-fa95be20]{margin-top:%?30?%;margin-bottom:%?30?%}",""]),t.exports=e},"7e62":function(t,e,a){var n=a("487e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("5cde5aaa",n,!0,{sourceMap:!1,shadowMode:!1})},c1f7:function(t,e,a){"use strict";var n=a("7e62"),i=a.n(n);i.a},eea3:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e966"),a("5c47"),a("0506"),a("0c26");var n={data:function(){return{pay_student_name:"",pay_student_id:"",pay_student_campus:"",pay_other_info:"",typeOptions:[{label:this.$t("fee_type.admissionApplicationFee"),value:2},{label:this.$t("fee_type.graduationFee"),value:3},{label:this.$t("fee_type.studentFee"),value:4},{label:this.$t("fee_type.accommodationFee"),value:5},{label:this.$t("fee_type.mealFee"),value:6}],type:0,fee:100}},onLoad:function(){},onShow:function(){},mounted:function(){},methods:{validateFee:function(){var t=parseInt(this.fee);(isNaN(t)||t<100)&&(uni.showModal({title:"Tips",content:this.$t("tips.enter_amount_minimum"),showCancel:!1}),this.fee="")},isMobile:function(){var t=navigator.userAgent.toLowerCase();return console.log(t),/iphone|ipad|ipod|android|mobile|blackberry|iemobile|opera mini/i.test(t)},gotoPayStripe:function(t,e){var a=this;if(this.isMobile())return console.log("当前是手机端"),void uni.showModal({title:"Tips",content:this.$t("tips.please_use_pc_browser"),showCancel:!1});this.pay_student_name.trim()?(this.pay_student_id.trim()||(this.pay_student_id="null"),this.pay_student_campus.trim()||(this.pay_student_campus="null"),uni.request({url:"https://mbtsserver.onrender.com/api/payment/create-checkout-session",method:"POST",header:{"Content-Type":"application/json"},data:{amount:100*this.fee,currency:t,name:this.pay_student_name+"_"+this.pay_student_id+"_"+this.pay_other_info,pay_type:e,type:this.type,student_id:this.pay_student_id,campus:this.pay_student_campus},success:function(t){console.log(t),200===t.statusCode?(console.log(t.data.url),window.open(t.data.url,"_blank")):(uni.showModal({title:a.$t("tips.payment_creation_failed"),content:t.data.error,showCancel:!1}),console.error("支付创建失败",t.data))},fail:function(t){uni.showModal({title:"fail",content:t,showCancel:!1}),console.error("请求失败",t)}})):uni.showToast({title:this.$t("tips.name_required"),icon:"none"})}}};e.default=n},f27a:function(t,e,a){"use strict";a.r(e);var n=a("0f57"),i=a("0479");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("c1f7");var o=a("828b"),u=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"fa95be20",null,!1,n["a"],void 0);e["default"]=u.exports}}]);