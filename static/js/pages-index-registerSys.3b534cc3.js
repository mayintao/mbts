(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-registerSys"],{3060:function(t,e,n){var a=n("44c9");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("967d").default;i("1dcf169c",a,!0,{sourceMap:!1,shadowMode:!1})},"35d9":function(t,e,n){"use strict";var a=n("3060"),i=n.n(a);i.a},"44c9":function(t,e,n){var a=n("c86c");e=a(!1),e.push([t.i,".container[data-v-646c8323]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;background-color:#f7f7f7;background-image:url(/static/web_main_bg.png)\n\t/* 替换为你的背景图片路径 */}.form-container[data-v-646c8323]{width:50%;background:#fff;padding:%?40?%;border-radius:%?20?%;box-shadow:0 %?4?% %?20?% rgba(0,0,0,.1)}.input-group[data-v-646c8323]{margin-bottom:%?30?%}.input-wrapper[data-v-646c8323]{display:flex;align-items:center;background:#f5f5f5;border-radius:%?12?%;padding:%?30?%;margin-top:%?60?%;margin-bottom:%?80?%}.input[data-v-646c8323]{flex:1;margin-left:%?10?%;font-size:%?27?%;border:none;background:none}.btn[data-v-646c8323]{width:100%;height:auto;font-size:%?28?%;border-radius:%?12?%;margin-top:%?50?%}.register-btn[data-v-646c8323]{background:#007aff;color:#fff}.back-btn[data-v-646c8323]{background:#fff;color:#007aff;border:%?2?% solid #007aff}.text-tips[data-v-646c8323]{margin:%?20?%;text-align:center;font-size:%?26?%;color:#666}.form-item[data-v-646c8323]{margin-top:%?30?%;margin-bottom:%?30?%}\n\n/* 标签样式 */.form-label[data-v-646c8323]{margin:%?30?%;font-size:%?28?%;color:#000;font-weight:700}.uni-input[data-v-646c8323]{margin-top:%?30?%;height:auto;padding:%?15?% %?25?%;line-height:%?50?%;font-size:%?28?%;background:#fff;flex:1;background-color:#5b5b5b;color:#f7f7f7;border:%?2?% solid #007aff}.navbar[data-v-646c8323]{position:fixed;\n\t/* 固定在最上方 */top:0;left:0;width:100%;\n\t/* 占满宽度 */height:44px;\n\t/* 高度可调整 */background-color:#fff;display:flex;justify-content:center;\n\t/* 水平居中 */align-items:center;\n\t/* 垂直居中 */border-bottom:1px solid #eee;z-index:999\n\t/* 保证在最上层 */}\n\n/* 标题样式 */.nav-title[data-v-646c8323]{font-size:16px;font-weight:700;white-space:nowrap;\n\t/* 强制一行 */overflow:hidden;\n\t/* 超出隐藏 */text-overflow:ellipsis;\n\t/* 超出加 ... */max-width:90%;text-align:center}\n\n/* 超过 12 个字符时字体缩小 */.nav-title.small[data-v-646c8323]{font-size:14px}",""]),t.exports=e},"641d":function(t,e,n){"use strict";n.r(e);var a=n("84af"),i=n.n(a);for(var s in a)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(s);e["default"]=i.a},"84af":function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("bd06"),n("0c26"),n("5c47"),n("0506");var a={data:function(){return{departmentList:[{name:"zh",desc:"中文"},{name:"en",desc:"English"},{name:"bahasa",desc:"Bahasa"}],departmentIndex:0,selectedDepartment:"zh",name:"",email:"",password:"",againpsw:""}},methods:{onLoad:function(){var t=uni.getStorageSync("lang")||"zh";console.log(t),this.departmentIndex=this.departmentList.findIndex((function(e){return e.name===t})),console.log(this.departmentIndex),this.selectedDepartment=this.departmentList[this.departmentIndex].name},onDepartmentChange:function(t){console.log(t),this.departmentIndex=t.detail.value,this.selectedDepartment=this.departmentList[this.departmentIndex].name,console.log(this.selectedDepartment),this.$i18n.locale=this.selectedDepartment,uni.setStorageSync("lang",this.selectedDepartment)},onKeyNameInput:function(t){this.name=t.target.value.trim()},onKeyEmailInput:function(t){this.email=t.target.value.trim()},onKeyPasswordInput:function(t){this.password=t.detail.value.trim()},onKeyAgainPswInput:function(t){this.againpsw=t.detail.value.trim()},gotoRegister:function(){if(this.name){if(this.email)if(/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(this.email))if(this.password&&8===this.password.length){if(this.password!==this.againpsw)return uni.showToast({title:this.$t("tips.password_mismatch"),icon:"none"}),this.password="",void(this.againpsw="");console.log(this.name,this.password,this.againpsw);var t=this;uni.showLoading({title:"registering..."}),uni.request({url:"https://mbtsserver.onrender.com/api/insertMBTSCommonRegisterUser",method:"POST",data:{department:t.selectedDepartment,full_name:t.name,password:t.password,role:0,email:t.email,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(e){uni.hideLoading(),console.log(e),console.log(e.data.desc),200===e.data.code?(uni.showToast({title:"success",icon:"success"}),uni.setStorageSync("user_info",{user_name:t.name,department:t.selectedDepartment}),uni.redirectTo({url:"studentMain"})):uni.showModal({content:e.data.desc||"fail",showCancel:!1})},fail:function(t){uni.hideLoading(),console.log(t),uni.showModal({title:"Tips",content:this.$t("tips.request_failed"),showCancel:!1})}})}else uni.showToast({title:this.$t("password"),icon:"none"});else uni.showToast({title:this.$t("tips.email_invalid_format"),icon:"none"});else uni.showToast({title:this.$t("tips.email_required"),icon:"none"})}else uni.showToast({title:this.$t("tips.name_required"),icon:"none"})},gotoLogin:function(){uni.redirectTo({url:"loginSys"})}}};e.default=a},a6a9:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a}));var a={uIcon:n("cf76").default},i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"navbar"},[n("v-uni-view",{staticClass:"nav-title",class:{small:t.$t("welcome").length>12}},[t._v(" "+t._s(t.$t("welcome"))+" ")])],1),n("v-uni-view",{staticClass:"form-container"},[n("v-uni-view",{staticClass:"input-group"},[n("v-uni-text",{staticClass:"text-tips"},[t._v(" "+t._s(t.$t("please_select_language")))]),n("v-uni-picker",{attrs:{value:t.departmentIndex,range:t.departmentList,"range-key":"desc"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onDepartmentChange.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.departmentList[t.departmentIndex].desc))])],1)],1),n("v-uni-view",{staticClass:"input-group"},[n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"account",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{type:"text",placeholder:t.$t("passport_name")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyNameInput.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"email",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{type:"email",placeholder:t.$t("email")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyEmailInput.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"lock",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{maxlength:"8",password:"true",placeholder:t.$t("password")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyPasswordInput.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"input-wrapper"},[n("u-icon",{attrs:{name:"lock",size:"22"}}),n("v-uni-input",{staticClass:"input",attrs:{maxlength:"8",password:"true",placeholder:t.$t("psw_again")},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.onKeyAgainPswInput.apply(void 0,arguments)}}})],1)],1),n("v-uni-button",{staticClass:"btn register-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoRegister.apply(void 0,arguments)}}},[t._v(t._s(t.$t("register")))]),n("v-uni-button",{staticClass:"btn back-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoLogin.apply(void 0,arguments)}}},[t._v(t._s(t.$t("login")))])],1)],1)},s=[]},cd6c:function(t,e,n){"use strict";n.r(e);var a=n("a6a9"),i=n("641d");for(var s in i)["default"].indexOf(s)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(s);n("35d9");var o=n("828b"),r=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"646c8323",null,!1,a["a"],void 0);e["default"]=r.exports}}]);