(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-admin-studentDetail"],{"1edc":function(n,t,e){"use strict";var a=e("ba29"),i=e.n(a);i.a},5826:function(n,t,e){"use strict";e.r(t);var a=e("5b3a"),i=e.n(a);for(var s in a)["default"].indexOf(s)<0&&function(n){e.d(t,n,(function(){return a[n]}))}(s);t["default"]=i.a},"5b3a":function(n,t,e){"use strict";e("6a54");var a=e("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(e("a934")),s={data:function(){return{id:0,full_name:"",form:{phoneNumber:"",currentChurch:"",nationality:"",housingStatus:"",email:""},student_campus:"",program:"",program_code:"0000",type_of_programme:"",program_description:"",year:0,student_id:"",all_credit:0,fees:0,other_fee:0,other_fee_detail:"",offer_status:1,offerOptions:[{label:"录取",value:0},{label:"暂不录取",value:1}],country_type:0,countryOptions:[{label:"发展中国家",value:0},{label:"发达国家",value:1}],scholarship:0,s3:null,listData:[]}},onLoad:function(n){var t=this;n&&(this.student_id=n.student_id,console.log(this.student_id)),uni.request({url:"https://mbtsserver.onrender.com/api/getAWSKey?key=registeruser1739935308mbts",method:"GET",success:function(n){console.log(n),i.default.config.update({accessKeyId:n.data.accessKeyId,secretAccessKey:n.data.secretAccessKey,region:n.data.region}),t.s3=new i.default.S3},fail:function(n){console.log(n)}}),this.queryUserDetail()},methods:{queryUserDetail:function(){var n=this;uni.showLoading({title:"处理中..."}),uni.request({url:"https://mbtsserver.onrender.com/api/queryMBTSRegisterUserDetail?id=0&student_id="+n.student_id+"&full_name=&key=registeruser1739935308mbts",method:"GET",header:{"Content-Type":"application/json",Accept:"application/json"},success:function(t){uni.hideLoading(),console.log(t),console.log(t.data.desc),200===t.data.code?(uni.showToast({title:"成功",icon:"success"}),n.id=t.data.data[0].id,n.full_name=t.data.data[0].full_name,n.student_id=t.data.data[0].student_id,n.form.currentChurch=t.data.data[0].current_church,n.form.email=t.data.data[0].email,n.form.housingStatus=t.data.data[0].housing_status,n.form.nationality=t.data.data[0].nationality,n.form.phoneNumber=t.data.data[0].phone_number,n.student_campus=t.data.data[0].student_campus,n.program=t.data.data[0].program,n.all_credit=t.data.data[0].all_credit,n.program_code=t.data.data[0].program_code,n.type_of_programme=t.data.data[0].type_of_programme,n.program_description=t.data.data[0].program_description,n.year=t.data.data[0].year,n.offer_status=t.data.data[0].offer_status,n.fees=t.data.data[0].fees,n.other_fee=t.data.data[0].other_fee,n.other_fee_detail=t.data.data[0].other_fee_detail,n.country_type=t.data.data[0].country_type,n.scholarship=t.data.data[0].scholarship,n.queryStudentFilesList()):uni.showModal({content:t.data.desc||"获取失败",showCancel:!1})},fail:function(n){uni.hideLoading(),console.log(n),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})},gotoUpdate:function(){console.log(this.offer_status),console.log(this.country_type);uni.showLoading({title:"提交中..."}),uni.request({url:"https://mbtsserver.onrender.com/api/updateMBTSRegisterUser",method:"POST",data:{id:this.id,student_id:this.student_id,all_credit:this.all_credit,offer_status:this.offer_status,other_fee:this.other_fee,other_fee_detail:this.other_fee_detail,country_type:this.country_type,scholarship:this.scholarship,fees:this.fees,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(n){uni.hideLoading(),console.log(n),console.log(n.data.desc),200===n.data.code?uni.showToast({title:"提交成功",icon:"success"}):uni.showModal({content:n.data.desc||"提交失败",showCancel:!1})},fail:function(n){uni.hideLoading(),console.log(n),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})},gotoUploadFiles:function(){var n=this;uni.chooseFile({count:1,type:"all",success:function(t){var e=t.tempFiles[0],a=e.name;console.log(a),uni.showLoading({title:"upload..."});var i=new Blob([e],{type:e.type}),s={Bucket:"mbts-admin",Key:a,Body:i,ContentType:e.type};n.s3.upload(s,(function(t,e){uni.hideLoading(),t?console.error("上传失败",t):(console.log(e),console.log("上传成功",e.Location),e.Location&&(uni.showLoading({title:"upload..."}),n.uploadToServer(e.Location,e.key)))}))},fail:function(n){console.error("选择文件失败",n)}})},uploadToServer:function(n,t){console.log(n,t);var e=this;uni.showLoading({title:"提交中..."}),uni.request({url:"https://mbtsserver.onrender.com/api/insertMBTSAdmissionFiles",method:"POST",data:{full_name:e.full_name,student_id:e.student_id,file_url:n,file_name:t,key:"registeruser1739935308mbts"},header:{"Content-Type":"application/json",Accept:"application/json"},success:function(n){uni.hideLoading(),console.log(n),console.log(n.data.desc),200===n.data.code?(uni.showToast({title:"提交成功",icon:"success"}),e.queryStudentFilesList()):uni.showModal({content:n.data.desc||"提交失败",showCancel:!1})},fail:function(n){uni.hideLoading(),console.log(n),uni.showModal({title:"错误",content:"请求失败，请检查网络连接",showCancel:!1})}})},queryStudentFilesList:function(){uni.showLoading({title:"查询中..."});var n=this;uni.request({url:"https://mbtsserver.onrender.com/api/queryMBTSAdmissionFilesList?student_id="+n.student_id+"&full_name="+n.full_name+"&startnum=0&key=registeruser1739935308mbts",method:"GET",success:function(t){uni.hideLoading(),console.log(t),console.log(t.data.desc),200===t.data.code?n.listData=t.data.data:uni.showModal({content:t.data.desc||"查询失败",showCancel:!1})},fail:function(n){uni.hideLoading(),console.log(n)}})},copyLink:function(n){uni.setClipboardData({data:n,success:function(){uni.showToast({title:"链接已复制",icon:"success"})}})}}};t.default=s},75451:function(n,t,e){"use strict";e.d(t,"b",(function(){return i})),e.d(t,"c",(function(){return s})),e.d(t,"a",(function(){return a}));var a={uForm:e("2515").default,uRadioGroup:e("3df2").default,uRadio:e("170f").default,uButton:e("c425").default},i=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",{staticClass:"form-card"},[e("u-form",[e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Full Name")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.full_name))])],1)],1),e("v-uni-text",{staticClass:"section-title"},[n._v("以下信息需要校方修改")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("学生ID")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学生ID",type:"text"},model:{value:n.student_id,callback:function(t){n.student_id=t},expression:"student_id"}})],1)],1),e("v-uni-text",{staticClass:"section-title"},[n._v("录取信息")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-view",{staticClass:"input-wrapper"},[e("u-radio-group",{model:{value:n.offer_status,callback:function(t){n.offer_status=t},expression:"offer_status"}},n._l(n.offerOptions,(function(t){return e("u-radio",{key:t.value,attrs:{name:t.value}},[n._v(n._s(t.label))])})),1)],1)],1),e("v-uni-text",{staticClass:"section-title"},[n._v("所在国家")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-view",{staticClass:"input-wrapper"},[e("u-radio-group",{model:{value:n.country_type,callback:function(t){n.country_type=t},expression:"country_type"}},n._l(n.countryOptions,(function(t){return e("u-radio",{key:t.value,attrs:{name:t.value}},[n._v(n._s(t.label))])})),1)],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Scholarship（0-100%）")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入奖学金",type:"number"},model:{value:n.scholarship,callback:function(t){n.scholarship=t},expression:"scholarship"}})],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("All Credit")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学分",type:"number"},model:{value:n.all_credit,callback:function(t){n.all_credit=t},expression:"all_credit"}})],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("其他费用")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入其他费用",type:"number"},model:{value:n.other_fee,callback:function(t){n.other_fee=t},expression:"other_fee"}}),e("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入费用详细清单",type:"text"},model:{value:n.other_fee_detail,callback:function(t){n.other_fee_detail=t},expression:"other_fee_detail"}})],1)],1),e("v-uni-view",{staticClass:"btn-container"},[e("u-button",{staticClass:"btn-class",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.gotoUpdate.apply(void 0,arguments)}}},[n._v("更新数据")]),e("u-button",{staticClass:"btn-class",attrs:{type:"primary"},on:{click:function(t){arguments[0]=t=n.$handleEvent(t),n.gotoUploadFiles.apply(void 0,arguments)}}},[n._v("上传学生所需文档")])],1),e("v-uni-text",{staticClass:"section-title"},[n._v("👤 基本信息")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Email")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.form.email))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Phone Number")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.form.phoneNumber))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Current Church/Organization")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.form.currentChurch))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Nationality")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.form.nationality))])],1)],1),e("v-uni-text",{staticClass:"section-title"},[n._v("🏠 住宿信息")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Housing Status")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.form.housingStatus))])],1)],1),e("v-uni-text",{staticClass:"section-title"},[n._v("🏫 学校信息")]),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Student Category")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.student_campus))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Program")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.program))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Program Code")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.program_code))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Type Of Programme")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.type_of_programme))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Program Description")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.program_description))])],1)],1),e("v-uni-view",{staticClass:"form-item"},[e("v-uni-text",{staticClass:"form-label"},[n._v("Fees（MYR）")]),e("v-uni-view",{staticClass:"input-wrapper"},[e("v-uni-view",{staticClass:"uni-input"},[n._v(n._s(n.fees))])],1)],1),e("v-uni-text",{staticClass:"file-title"},[n._v("录取相关文件")]),e("v-uni-scroll-view",{staticClass:"file-list",attrs:{"scroll-y":!0}},n._l(n.listData,(function(t,a){return e("v-uni-view",{key:a,staticClass:"file-card"},[e("v-uni-view",{staticClass:"file-header"},[e("v-uni-text",{staticClass:"file-name"},[n._v(n._s(t.file_name))])],1),e("v-uni-view",{staticClass:"file-header",on:{click:function(e){arguments[0]=e=n.$handleEvent(e),n.copyLink(t.file_url)}}},[e("v-uni-text",{staticClass:"link-text"},[n._v("点击复制文件链接")])],1),e("v-uni-view",{staticClass:"file-header"},[e("v-uni-text",{staticClass:"file-time"},[n._v(n._s(t.time))])],1)],1)})),1)],1)],1)],1)},s=[]},8289:function(n,t,e){"use strict";e.r(t);var a=e("75451"),i=e("5826");for(var s in i)["default"].indexOf(s)<0&&function(n){e.d(t,n,(function(){return i[n]}))}(s);e("1edc");var o=e("828b"),l=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"6fc42881",null,!1,a["a"],void 0);t["default"]=l.exports},"93af":function(n,t,e){"use strict";function a(n,t,e){this.$children.map((function(i){n===i.$options.name?i.$emit.apply(i,[t].concat(e)):a.apply(i,[n,t].concat(e))}))}e("6a54"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,e("fd3c"),e("c223");var i={methods:{dispatch:function(n,t,e){var a=this.$parent||this.$root,i=a.$options.name;while(a&&(!i||i!==n))a=a.$parent,a&&(i=a.$options.name);a&&a.$emit.apply(a,[t].concat(e))},broadcast:function(n,t,e){a.call(this,n,t,e)}}};t.default=i},ba29:function(n,t,e){var a=e("e43c");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);var i=e("967d").default;i("1db25153",a,!0,{sourceMap:!1,shadowMode:!1})},e43c:function(n,t,e){var a=e("c86c");t=a(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* 容器 */.container[data-v-6fc42881]{display:flex;flex-direction:column;background-color:#f8f9fa;min-height:100vh;padding:%?20?%;align-items:center}\n/* 标题区域 */.header[data-v-6fc42881]{text-align:center;margin-bottom:%?40?% /* 保持整体下边距 */}\n/* 标题样式 */.title-wrapper[data-v-6fc42881]{margin-bottom:%?20?% /* 🔥 让标题和副标题分开 */}.title[data-v-6fc42881]{font-size:%?42?%;font-weight:700;color:#333}\n/* 副标题样式 */.subtitle-wrapper[data-v-6fc42881]{margin-top:%?10?% /* 确保副标题和标题有适当间距 */}.subtitle[data-v-6fc42881]{font-size:%?30?%;color:#666; /* 颜色更柔和 */line-height:1.5}\n/* 表单卡片 */.form-card[data-v-6fc42881]{width:92%;background:#fff;padding:%?30?%;border-radius:%?20?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1);background-image:url(/static/web_student_bg.png) /* 替换为你的背景图片路径 */}\n/* 分区标题 */.section-title[data-v-6fc42881]{font-size:%?32?%;font-weight:700;color:#444;margin:%?20?% 0;border-bottom:%?2?% solid #ddd;padding-bottom:%?10?%}\n/* 按钮 */.btn-container[data-v-6fc42881]{display:flex;flex-direction:row;width:50%;margin:%?20?%;justify-content:flex-start;align-items:center}.btn-class[data-v-6fc42881]{display:flex;width:50%;margin:%?20?%;justify-content:center;align-items:center}\n/* Form Item 纵向排列 */.form-item[data-v-6fc42881]{margin-top:%?30?%;margin-bottom:%?30?%}\n/* 标签样式 */.form-label[data-v-6fc42881]{margin-top:%?10?%;font-size:%?30?%;color:#333;font-weight:700;margin-bottom:%?10?%}\n/* 输入框的容器 */.input-wrapper[data-v-6fc42881]{width:50%;background-color:#fff;border-radius:%?12?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1); /* 轻微阴影 */padding:%?8?% %?30?%;border:%?1?% solid #ddd; /* 边框 */margin-top:%?10?%;margin-bottom:%?10?%}\n/* 输入框 */.input-field[data-v-6fc42881]{width:100%;height:%?80?%;font-size:%?30?%;color:#333;background-color:initial;border:none;outline:none}.uni-input[data-v-6fc42881]{height:%?50?%;padding:%?15?% %?25?%;line-height:%?50?%;font-size:%?28?%;background:#fff;flex:1}.course-header[data-v-6fc42881]{display:flex;justify-content:space-between;align-items:center;margin:%?10?%}.course-title[data-v-6fc42881]{font-size:%?32?%;font-weight:700;color:#123456;background-color:#f8f9fa;padding:%?30?% %?30?%}.file-title[data-v-6fc42881]{font-size:%?36?%;font-weight:700;margin-bottom:%?20?%;display:block}.file-list[data-v-6fc42881]{max-height:%?800?%;overflow-y:auto}.file-card[data-v-6fc42881]{background:#f9f9f9;padding:%?20?%;margin-bottom:%?20?%;border-radius:%?12?%;box-shadow:0 %?2?% %?10?% rgba(0,0,0,.1)}.file-header[data-v-6fc42881]{display:flex;justify-content:space-between;align-items:center;margin-bottom:%?10?%}.file-time[data-v-6fc42881]{font-size:%?28?%;color:#888}.file-name[data-v-6fc42881]{font-size:%?32?%;font-weight:700;color:#333}.copy-area[data-v-6fc42881]{cursor:pointer;padding:%?10?%;background:#87ceeb;color:#87ceeb;text-align:center;border-radius:%?8?%}.link-text[data-v-6fc42881]{color:#87ceeb;text-decoration:underline}",""]),n.exports=t}}]);