(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-commonPay"],{"0479":function(t,e,a){"use strict";a.r(e);var n=a("eea3"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},"2f60":function(t,e,a){"use strict";var n=a("78eb"),i=a.n(n);i.a},"78eb":function(t,e,a){var n=a("fc7f");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("967d").default;i("0ba2f7d6",n,!0,{sourceMap:!1,shadowMode:!1})},9248:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return n}));var n={uRadioGroup:a("63a8").default,uRadio:a("caf5").default,uButton:a("6def").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-text",{staticClass:"section-title"},[t._v("MJS系统支付")]),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学生或支付机构名称",type:"text"},model:{value:t.pay_student_name,callback:function(e){t.pay_student_name=e},expression:"pay_student_name"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入学生ID",type:"text"},model:{value:t.pay_student_id,callback:function(e){t.pay_student_id=e},expression:"pay_student_id"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入校区信息",type:"text"},model:{value:t.pay_student_campus,callback:function(e){t.pay_student_campus=e},expression:"pay_student_campus"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"其他备注信息",type:"text"},model:{value:t.pay_other_info,callback:function(e){t.pay_other_info=e},expression:"pay_other_info"}})],1),a("v-uni-view",{staticClass:"input-wrapper"},[a("u-radio-group",{model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.typeOptions,(function(e){return a("u-radio",{key:e.value,attrs:{name:e.value}},[t._v(t._s(e.label))])})),1)],1),a("v-uni-text",{staticClass:"section-subtitle"},[t._v("请输入不少于100的金额（MYR 马币）")]),a("v-uni-view",{staticClass:"input-wrapper"},[a("v-uni-input",{staticClass:"input-field",attrs:{placeholder:"请输入金额",type:"number"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.validateFee.apply(void 0,arguments)}},model:{value:t.fee,callback:function(e){t.fee=e},expression:"fee"}})],1),a("v-uni-text",{staticClass:"section-subtitle"},[t._v("请选择支付渠道")]),a("v-uni-view",{staticClass:"head-container"},[a("u-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.gotoPayStripe("MYR","card")}}},[t._v("银行卡支付")])],1)],1)},o=[]},eea3:function(t,e,a){"use strict";a("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("e966"),a("0c26");var n={data:function(){return{pay_student_name:"",pay_student_id:"",pay_student_campus:"",pay_other_info:"",typeOptions:[{label:"申请费",value:2},{label:"毕业费",value:3},{label:"学生费",value:4},{label:"住宿费",value:5},{label:"伙食费",value:6}],type:0,fee:100}},onLoad:function(){},onShow:function(){},mounted:function(){},methods:{validateFee:function(){var t=parseInt(this.fee);(isNaN(t)||t<100)&&(uni.showModal({title:"提示",content:"请输入不少于100的金额",showCancel:!1}),this.fee="")},gotoPayStripe:function(t,e){this.pay_student_name.trim()?uni.request({url:"https://mbtsserver.onrender.com/api/payment/create-checkout-session",method:"POST",header:{"Content-Type":"application/json"},data:{amount:100*this.fee,currency:t,name:this.pay_student_name+"_"+this.pay_student_id+"_"+this.pay_other_info,pay_type:e,type:this.type,student_id:this.pay_student_id,campus:this.pay_student_campus},success:function(t){console.log(t),200===t.statusCode?(console.log(t.data.url),window.open(t.data.url,"_blank")):(uni.showModal({title:"支付创建失败",content:t.data.error,showCancel:!1}),console.error("支付创建失败",t.data))},fail:function(t){uni.showModal({title:"请求失败",content:t,showCancel:!1}),console.error("请求失败",t)}}):uni.showToast({title:"名称不能为空",icon:"none"})}}};e.default=n},f27a:function(t,e,a){"use strict";a.r(e);var n=a("9248"),i=a("0479");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("2f60");var s=a("828b"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"02b08ab6",null,!1,n["a"],void 0);e["default"]=u.exports},fc7f:function(t,e,a){var n=a("c86c");e=n(!1),e.push([t.i,".container[data-v-02b08ab6]{display:flex;flex-direction:column;background-color:#f8f9fa;min-height:auto;padding:%?20?%;align-items:center}.section-title[data-v-02b08ab6]{font-size:%?42?%;font-weight:700;color:#666;padding:%?20?%;margin-top:%?40?%}.section-subtitle[data-v-02b08ab6]{font-size:%?32?%;color:#444;padding:%?20?%;margin-top:%?40?%}.head-container[data-v-02b08ab6]{display:flex;flex-direction:column; /* 让头像和按钮垂直排列 */align-items:center;padding:%?20?%}.btn[data-v-02b08ab6]{width:%?1000?%;margin:%?20?%;padding:20px;text-align:center}.input-wrapper[data-v-02b08ab6]{height:auto;padding:%?20?%;width:20%;background-color:#fff;border-radius:%?12?%;box-shadow:0 %?4?% %?10?% rgba(0,0,0,.1); /* 轻微阴影 */border:%?1?% solid #ddd; /* 边框 */margin-top:%?10?%;margin-bottom:%?10?%}.form-item[data-v-02b08ab6]{margin-top:%?30?%;margin-bottom:%?30?%}",""]),t.exports=e}}]);